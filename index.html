<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Little Surprise</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 20px;
            overflow: hidden;
            transition: background-color 0.3s ease;
        }

        /* Screen Shake Animation */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        .apply-shake { animation: shake 0.4s; }

        .flash-red { background-color: #fee2e2 !important; }
        .flash-green { background-color: #dcfce7 !important; }

        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            width: 100%;
            max-width: 400px;
            padding: 2rem;
            position: relative;
            z-index: 10;
        }

        .option-btn {
            width: 100%;
            text-align: left;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border: 2px solid #f9a8d4;
            border-radius: 12px;
            background: white;
            color: #be185d;
            font-weight: 600;
            transition: all 0.2s;
            cursor: pointer;
        }

        .progress-container {
            width: 100%;
            height: 8px;
            background: #f3f4f6;
            border-radius: 10px;
            margin-top: 20px;
            overflow: hidden;
        }
        #progress-bar {
            height: 100%;
            background: #f472b6;
            width: 0%;
            transition: width 0.4s ease;
        }

        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.4);
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
            z-index: 50;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            max-width: 320px;
            width: 100%;
            /* Enhanced Pop-up animation: starts small (0) and grows */
            animation: growIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes growIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .hidden { display: none; }

        /* Snow Theme */
        .snow-bg {
            background: linear-gradient(to bottom, #e0f2fe 0%, #ffffff 100%) !important;
        }
        .snowflake {
            position: absolute;
            top: -10px;
            color: white;
            font-size: 1em;
            user-select: none;
            z-index: 1;
            animation: fall linear infinite;
        }
        @keyframes fall {
            to { transform: translateY(105vh); }
        }
    </style>
</head>
<body id="main-body">

    <audio id="btn-sound" src="ButtonSound.wav" preload="auto"></audio>

    <!-- Quiz Container -->
    <div id="quiz-container" class="glass-card">
        <div id="progress-text" class="text-pink-400 text-sm font-bold mb-2 uppercase tracking-widest">Question 1 of 3</div>
        <h2 id="question-text" class="text-2xl font-bold text-pink-700 mb-6">Loading...</h2>
        
        <div id="options-container"></div>

        <div class="progress-container">
            <div id="progress-bar"></div>
        </div>
    </div>

    <!-- Summary Container -->
    <div id="summary-container" class="glass-card hidden text-center">
        <h2 id="score-text" class="text-2xl font-bold text-pink-700 mb-2">You scored x/3</h2>
        <p class="text-pink-600 mb-6 font-medium">In all honesty, this was a pointless quiz</p>
        <button onclick="revealPresent()" class="bg-pink-500 text-white px-6 py-3 rounded-full font-bold shadow-lg active:bg-pink-600 transition-all">
            Click this button to see your present
        </button>
    </div>

    <!-- Andorra Reveal Screen -->
    <div id="andorra-container" class="glass-card hidden text-center">
        <div class="text-6xl mb-4">üèÇ</div>
        <h2 class="text-3xl font-bold text-blue-800 mb-4">SURPRISE!</h2>
        <p class="text-xl text-blue-600 leading-relaxed font-semibold mb-8">
            We're going to learn how to snowboard in Andorra because why not
        </p>
        <button onclick="resetApp()" class="text-blue-400 text-sm underline font-bold uppercase tracking-widest">
            Restart Quiz
        </button>
    </div>

    <!-- Custom Popup Modal -->
    <div id="modal" class="modal-overlay">
        <div class="modal-content">
            <div id="modal-emoji" class="text-5xl mb-3"></div>
            <h3 id="modal-title" class="text-2xl font-bold mb-2"></h3>
            <p id="modal-message" class="text-gray-600 mb-6 italic"></p>
            <button onclick="closeModal()" class="bg-pink-500 text-white px-10 py-2 rounded-full font-bold shadow-lg">
                Next
            </button>
        </div>
    </div>

    <script>
        const questions = [
            {
                q: "Who is the coolest?",
                options: ["Bali", "Chester", "Matcha", "Snowboarding"],
                correct: 3,
                correctMsg: "Very chilly indeed",
                wrongMsg: "C'mon I said COOLest"
            },
            {
                q: "When was our first holiday abroad together?",
                options: ["Feb 2018", "January 2019", "Feb 2019", "June 2018"],
                correct: 2,
                correctMsg: "sofa bed queen and king unite",
                wrongMsg: "wow, I thought you remembered everything"
            },
            {
                q: "On a scale of poor, how poor does your holiday addiction keep me?",
                options: ["Very poor", "Rice and Beans", "Grow up, you'll never wish you saved the money", "I'll just take 'a little bit' out of my house pot"],
                correct: -1,
                correctMsg: "",
                wrongMsg: "Shock, it's all of the above"
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        const sound = document.getElementById('btn-sound');
        const container = document.getElementById('quiz-container');

        function playSound() {
            sound.currentTime = 0;
            sound.play().catch(e => console.log("Audio play failed"));
        }

        function triggerShake() {
            container.classList.add('apply-shake');
            setTimeout(() => container.classList.remove('apply-shake'), 400);
        }

        function flashScreen(type) {
            const body = document.body;
            const className = type === 'correct' ? 'flash-green' : 'flash-red';
            body.classList.add(className);
            setTimeout(() => body.classList.remove(className), 500);
        }

        function loadQuestion() {
            const qData = questions[currentQuestion];
            document.getElementById('progress-text').innerText = `Question ${currentQuestion + 1} of 3`;
            document.getElementById('question-text').innerText = qData.q;
            
            const progressPercent = ((currentQuestion) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = progressPercent + "%";
            
            const optionsDiv = document.getElementById('options-container');
            optionsDiv.innerHTML = '';
            
            qData.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = `${String.fromCharCode(65 + index)}) ${opt}`;
                btn.onclick = () => handleAnswer(index);
                optionsDiv.appendChild(btn);
            });
        }

        function handleAnswer(selectedIndex) {
            playSound();
            triggerShake();
            const qData = questions[currentQuestion];
            const isCorrect = selectedIndex === qData.correct;
            
            // Short delay so the shake finishes before pop-up
            setTimeout(() => {
                if (isCorrect) {
                    score++;
                    flashScreen('correct');
                    showModal("You're so smart!", qData.correctMsg, "üéâ", false);
                } else {
                    flashScreen('wrong');
                    showModal("WRONG", qData.wrongMsg, "üò¢", true);
                }
            }, 100);
        }

        function showModal(title, message, emoji, isWrong) {
            const titleEl = document.getElementById('modal-title');
            titleEl.innerText = title;
            titleEl.style.color = isWrong ? "#ef4444" : "#10b981";
            
            document.getElementById('modal-message').innerText = message;
            document.getElementById('modal-emoji').innerText = emoji;
            document.getElementById('modal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
            nextQuestion();
        }

        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < questions.length) {
                loadQuestion();
            } else {
                showSummary();
            }
        }

        function showSummary() {
            document.getElementById('progress-bar').style.width = "100%";
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('summary-container').classList.remove('hidden');
            document.getElementById('score-text').innerText = `You scored ${score}/3`;
        }

        function revealPresent() {
            playSound();
            document.getElementById('summary-container').classList.add('hidden');
            document.getElementById('andorra-container').classList.remove('hidden');
            document.body.classList.add('snow-bg');
            createSnow();
        }

        function resetApp() {
            currentQuestion = 0;
            score = 0;
            document.querySelectorAll('.snowflake').forEach(s => s.remove());
            document.body.classList.remove('snow-bg');
            document.getElementById('andorra-container').classList.add('hidden');
            document.getElementById('quiz-container').classList.remove('hidden');
            loadQuestion();
        }

        function createSnow() {
            for (let i = 0; i < 50; i++) {
                const flake = document.createElement('div');
                flake.className = 'snowflake';
                flake.innerHTML = '‚ùÑ';
                flake.style.left = Math.random() * 100 + 'vw';
                flake.style.animationDuration = (Math.random() * 3 + 2) + 's';
                flake.style.opacity = Math.random();
                flake.style.fontSize = (Math.random() * 10 + 10) + 'px';
                document.body.appendChild(flake);
            }
        }

        window.onload = loadQuestion;
    </script>
</body>
</html>